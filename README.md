# auth_api_1

## Внесены исправления первого ревью. Важные изменения:

### Добавлена возможность создания суперпользователя:

После успешного запуска приложения (описано ниже), перейти в корневую директорию проекта, оттуда запустить скрипт командой

````
make user
````

Скрипт `create_superuser.py` смотрит в первую очередь на логин/пароль, указанные в `.env` файле.

### Добавлена проверка наличия ролей админа

Для всех ручек изменения/выдачи ролей.

Проверяется соответствие списку из константы `ADMIN_ROLES` в файле `core/config.py`. В сам сваггер добавлено поле для ввода токена доступа (access token), добавлены проверки устаревания, корректности токена.


### Добавлены тесты

Для запуска тестов необходимо перейти в директорию `tests` и выполнить команду `pytest`.

## Шестой спринт (командный проект).

Выполненное задание 6-го спринта. Добавлены ручки для управления пользователем:

- Регистрация
- Вход
- Обновление access-токена
- Выход
- Изменение пароля
- История входов

Также имеются ручки для управления ролями пользователя:

- CRUD (создание, обновление, удаление, просмотр ролей)
- назначение роли пользователю
- удаление роли у пользователя
- просмотр ролей пользователя

В директории `previous_sprints` лежит конфиг `nginx`. Код текущего спринта находится в папке `src`.

## Запуск проекта.

Создать `.env` файл по образцу `.env.sample`.

Из основной директории:
````
docker-compose up -d
````

После выполнения команды сваггер будет доступен по адресу 
````
http://127.0.0.1/api
````